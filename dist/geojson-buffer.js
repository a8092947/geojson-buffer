!function(a,b){typeof exports==='object'&&typeof module!=='undefined'?b(exports):typeof define==='function'&&define.amd?define(['exports'],b):(b((a.geojsonBuffer={})))}(this,(function(c){'use strict';function e(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value" in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function g(a,b,c){b&&f(a.prototype,b);c&&f(a,c);return a}function h(a,b,c){var d=Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)),e=a.x+c*(b.y-a.y)/d,f=b.x+c*(b.y-a.y)/d,g=a.y+c*(a.x-b.x)/d,h=b.y+c*(a.x-b.x)/d;return[new x([e,g]),new x([f,h])]}function j(a,b,c,d,e,f,g,h){var i,j,k,l,m,n=[null,null];i=(h-f)*(c-a)-(g-e)*(d-b);if(i===0)return !1;j=b-f;k=a-e;l=(g-e)*j-(h-f)*k;m=(c-a)*j-(d-b)*k;j=l/i;k=m/i;n[0]=a+j*(c-a);n[1]=b+j*(d-b);return new x(n)}function k(a){return a*180/Math.PI}function l(a){return a*Math.PI/180}function m(a){var b=a%360;b<0&&(b+=360);return b}var o=6371008.8,q={centimeters:o*100,centimetres:o*100,degrees:180/Math.PI,feet:o*3.28084,inches:o*39.370,kilometers:o/1000,kilometres:o/1000,meters:o,metres:o,miles:o/1609.344,millimeters:o*1000,millimetres:o*1000,nauticalmiles:o/1852,radians:1,yards:o/1.0936};function r(a,b){var c=q[b||'kilometers'];return a/c}function s(a,b){b===null&&(b='kilometers');return k(r(a,b))}function u(a,b){var c=a.radiansY-b.radiansY,d=a.radiansX-b.radiansX,e=a.radiansY,f=b.radiansY,g=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(d/2),2)*Math.cos(e)*Math.cos(f);return 2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))}function w(a,b){var c=l(a.x),d=l(b.x),e=l(a.y),f=l(b.y),g=Math.sin(d-c)*Math.cos(f),h=Math.cos(e)*Math.sin(f)-Math.sin(e)*Math.cos(f)*Math.cos(d-c);return k(Math.atan2(g,h))}var x=function(){function a(b){e(this,a);this.x=b[0];this.y=b[1];this.radiansX=null;this.radiansY=null;this.calcRadiansForCoords();this.prevPoint=null;this.bearingPrevPoint=null;this.nextPoint=null;this.bearingNextPoint=null;this.angleBetweenPoints=null;this.isConcave=null}g(a,[{key:"calcRadiansForCoords",value:function a(){this.radiansX=l(this.x);this.radiansY=l(this.y)}},{key:"calcuateAnglesBetweeenPoints",value:function a(){this.bearingPrevPoint=w(this,this.prevPoint);this.bearingNextPoint=w(this,this.nextPoint);this.angleBetweenPoints=m(m(this.bearingNextPoint)-m(this.bearingPrevPoint));this.isConcave=this.angleBetweenPoints>180}}]);return a}();function y(a,b,c,d,e,f,g){switch(a){case 'round':return z(b,c,d,e,f,g)}}function z(a,b,c,d,e,f){return B(a,b,e,d,f,!1)}var A=Math.PI*2;function B(a,b,c,d,e,f){var g=[],h=Math.atan2(c.y-a.y,c.x-a.x),i=Math.atan2(d.y-a.y,d.x-a.x);h<0&&(h+=A);i<0&&(i+=A);var j=h>i?h-i:h+A-i,k=(A-j)/e;for(var l=1;l<e+1;++l)j=h+k*l,g.push(new x([a.x+Math.cos(j)*b,a.y+Math.sin(j)*b]));return g}function C(a){if(process.env.NODE_ENV!=='development')return;var b=window.map,c=L.layerGroup([]).addTo(b);a.forEach(function(a){L.circleMarker([a.y,a.x],{color:a.isConcave?'red':'green'}).addTo(c)});c.remove()}var D=function(){function a(b){e(this,a);this.edges=[];this.points=[];this.isHole=b;this.outContour=[]}g(a,[{key:"createRawOffset",value:function c(a,b){this.edges[this.edges.length-1].offsetEdge(a);for(var d=0;d<this.edges.length;d++){var e=this.edges[d];e.offsetEdge(a);var f=e.point1;if(f.isConcave)this.outContour.push(e.getIntersection(e.prevEdge));else{var h=y('round',e.point1,a,b,e.offsetPoint1,e.prevEdge.offsetPoint2,32);this.outContour=this.outContour.concat(h)}}return this.outContour.map(function(a){return[a.x,a.y]})}}]);return a}(),E=function(){function a(b,c){e(this,a);this.point1=b;this.point2=c;this.offsetPoint1=null;this.offsetPoint2=null;this.prevEdge=null;this.nextEdge=null;this.edgeType=null;this.edgeLengthRadians=this.getEdgeLengthInRadians()}g(a,[{key:"offsetEdge",value:function b(a){var c=h(this.point1,this.point2,a);this.offsetPoint1=c[0];this.offsetPoint2=c[1]}},{key:"getIntersection",value:function b(a){var c=j(this.offsetPoint1.x,this.offsetPoint1.y,this.offsetPoint2.x,this.offsetPoint2.y,a.offsetPoint1.x,a.offsetPoint1.y,a.offsetPoint2.x,a.offsetPoint2.y);return c}},{key:"getEdgeLengthInRadians",value:function a(){return u(this.point1,this.point2)}},{key:"splitAtPoint",value:function c(b){b.prevPoint=this.point1;b.nextPoint=this.point2;this.point1.nextPoint=b;this.point2.prevPoint=b;var d=new a(this.point1,b);d.edgeType='entry';d.prevEdge=this.prevEdge;this.prevEdge.nextEdge=d;var e=new a(b,this.point2);e.edgeType='exit';e.nextEdge=this.nextEdge;e.nextEdge.prevEdge=e;e.prevEdge=d;d.nextEdge=e;return[d,e]}}]);return a}();function F(a){var b=a.type==='Feature'?a.geometry:a,c=b.coordinates;(b.type==='Polygon'||b.type==='MultiLineString')&&(c=[c]);b.type==='LineString'&&(c=[[c]]);var d=[];for(var e=0;e<c[0].length;e++){var f=new D(e>0);d.push(f);var g=new x(c[0][e][0]),h=new x(c[0][e][1]),i=new x(c[0][e][2]);G(g,h,i);f.points.push(g);var j=new E(g,h);f.edges.push(j);var k=g,l=j;g=h;h=i;for(var m=2;m<c[0][e].length-2;m++){f.points.push(g);i=new x(c[0][e][m+1]);G(g,h,i);var n=new E(g,h);n.prevEdge=j;j.nextEdge=n;f.edges.push(n);g=h;h=i;j=n}G(g,h,k);var o=new E(j.point2,h);o.prevEdge=j;j.nextEdge=o;f.edges.push(o);var p=new E(h,k);p.prevEdge=o;o.nextEdge=p;l.prevEdge=p;p.nextEdge=l;f.edges.push(p);f.points.push(g);f.points.push(i)}C(d[0].points);return d}function G(a,b,c){b.prevPoint=a;b.nextPoint=c;b.calcuateAnglesBetweeenPoints()}var H=function(){function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:I;e(this,a);this.data=b;this.length=this.data.length;this.compare=c;if(this.length>0){for(var d=(this.length>>1)-1;d>=0;d--)this._down(d)}}g(a,[{key:"push",value:function b(a){this.data.push(a);this.length++;this._up(this.length-1)}},{key:"pop",value:function a(){if(this.length===0)return undefined;var b=this.data[0];this.length--;this.length>0&&(this.data[0]=this.data[this.length],this._down(0));this.data.pop();return b}},{key:"peek",value:function a(){return this.data[0]}},{key:"_up",value:function b(a){var c=this.data,d=this.compare,e=c[a];while(a>0){var f=a-1>>1,g=c[f];if(d(e,g)>=0)break;c[a]=g;a=f}c[a]=e}},{key:"_down",value:function b(a){var c=this.data,d=this.compare,e=this.length>>1,f=c[a];while(a<e){var g=(a<<1)+1,h=c[g],i=g+1;i<this.length&&d(c[i],h)<0&&(g=i,h=c[i]);if(d(h,f)>=0)break;c[a]=h;a=g}c[a]=f}}]);return a}();function I(a,b){return a<b?-1:a>b?1:0}function J(a,b){if(a.x>b.x)return 1;if(a.x<b.x)return-1;if(a.y!==b.y)return a.y>b.y?1:-1;return 1}var K=function a(){e(this,a);return new H([],J)},M=function c(a,b){e(this,c);this.key=a;this.data=b;this.left=null;this.right=null};function N(a,b){return a>b?1:a<b?-1:0}function O(a,b,c){if(b===null)return b;var d,e,f,g=new M();d=e=g;while(!0){var h=c(a,b.key);if(h<0){if(b.left===null)break;if(c(a,b.left.key)<0){f=b.left;b.left=f.right;f.right=b;b=f;if(b.left===null)break}e.left=b;e=b;b=b.left}else if(h>0){if(b.right===null)break;if(c(a,b.right.key)>0){f=b.right;b.right=f.left;f.left=b;b=f;if(b.right===null)break}d.right=b;d=b;b=b.right}else{break}}d.right=b.left;e.left=b.right;b.left=g.right;b.right=g.left;return b}function P(a,b,c,d,e){var f=new M(a,b);e._size++;if(c===null){f.left=f.right=null;return f}c=O(a,c,d);var g=d(a,c.key);g<0?(f.left=c.left,f.right=c,c.left=null):g>=0&&(f.right=c.right,f.left=c,c.right=null);return f}function Q(a,b,c,d,e){var f=new M(a,b);if(c===null){f.left=f.right=null;e._size++;return f}c=O(a,c,d);var g=d(a,c.key);if(g===0)return c;else{g<0?(f.left=c.left,f.right=c,c.left=null):g>0&&(f.right=c.right,f.left=c,c.right=null);e._size++;return f}}function R(a,b,c,d){var e;if(b===null)return null;b=O(a,b,c);var f=c(a,b.key);if(f===0){b.left===null?(e=b.right):(e=O(a,b.left,c),e.right=b.right);d._size--;return e}return b}function S(a,b,c){var d,e;if(b===null)d=e=null;else{b=O(a,b,c);var f=c(b.key,a);f===0?(d=b.left,e=b.right):f<0?(e=b.right,b.right=null,d=b):(d=b.left,b.left=null,e=b)}return{left:d,right:e}}function T(a,b,c){if(b===null)return a;if(a===null)return b;b=O(a.key,b,c);b.left=a;return b}function U(a,b,c,d,e){if(a){d("".concat(b).concat(c?'└── ':'├── ').concat(e(a),"\n"));var f=b+(c?'    ':'│   ');a.left&&U(a.left,f,!1,d,e);a.right&&U(a.right,f,!0,d,e)}}var V=function(){function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:N;e(this,a);this._comparator=b;this._root=null;this._size=0}g(a,[{key:"insert",value:function c(a,b){return this._root=P(a,b,this._root,this._comparator,this)}},{key:"add",value:function c(a,b){return this._root=Q(a,b,this._root,this._comparator,this)}},{key:"remove",value:function b(a){this._root=R(a,this._root,this._comparator,this)}},{key:"pop",value:function a(){var b=this._root;if(b){while(b.left)b=b.left;this._root=O(b.key,this._root,this._comparator);this._root=R(b.key,this._root,this._comparator,this);return{key:b.key,data:b.data}}return null}},{key:"findStatic",value:function b(a){var c=this._root,d=this._comparator;while(c){var e=d(a,c.key);if(e===0)return c;else e<0?(c=c.left):(c=c.right)}return null}},{key:"find",value:function b(a){if(this._root){this._root=O(a,this._root,this._comparator);if(this._comparator(a,this._root.key)!==0)return null}return this._root}},{key:"contains",value:function b(a){var c=this._root,d=this._comparator;while(c){var e=d(a,c.key);if(e===0)return !0;else e<0?(c=c.left):(c=c.right)}return !1}},{key:"forEach",value:function c(a,b){var d=this._root,e=[],f=!1;while(!f)d!==null?(e.push(d),d=d.left):e.length!==0?(d=e.pop(),a.call(b,d),d=d.right):(f=!0);return this}},{key:"range",value:function e(a,b,c,d){var f=[],g=this._comparator,h=this._root,i;while(f.length!==0||h){if(h)f.push(h),h=h.left;else{h=f.pop();i=g(h.key,b);if(i>0){break}else if(g(h.key,a)>=0){if(c.call(d,h))return this};h=h.right}}return this}},{key:"keys",value:function(){var a=[];this.forEach(function(b){var c=b.key;return a.push(c)});return a}},{key:"values",value:function(){var a=[];this.forEach(function(b){var c=b.data;return a.push(c)});return a}},{key:"min",value:function a(){if(this._root)return this.minNode(this._root).key;return null}},{key:"max",value:function a(){if(this._root)return this.maxNode(this._root).key;return null}},{key:"minNode",value:function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._root;if(b)while(b.left)b=b.left;return b}},{key:"maxNode",value:function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._root;if(b)while(b.right)b=b.right;return b}},{key:"at",value:function b(a){var c=this._root,d=!1,e=0,f=[];while(!d){if(c)f.push(c),c=c.left;else{if(f.length>0){c=f.pop();if(e===a)return c;e++;c=c.right}else d=!0}}return null}},{key:"next",value:function b(a){var c=this._root,d=null;if(a.right){d=a.right;while(d.left)d=d.left;return d}var e=this._comparator;while(c){var f=e(a.key,c.key);if(f===0)break;else f<0?(d=c,c=c.left):(c=c.right)}return d}},{key:"prev",value:function b(a){var c=this._root,d=null;if(a.left!==null){d=a.left;while(d.right)d=d.right;return d}var e=this._comparator;while(c){var f=e(a.key,c.key);if(f===0)break;else f<0?(c=c.left):(d=c,c=c.right)}return d}},{key:"clear",value:function a(){this._root=null;this._size=0;return this}},{key:"toList",value:function a(){return Y(this._root)}},{key:"load",value:function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],d=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1,e=b.length,f=this._comparator;d&&$(b,c,0,e-1,f);if(this._root===null)this._root=W(this._root,b,c,0,e),this._size=e;else{var g=_(this.toList(),X(b,c),f);e=this._size+e;this._root=Z({head:g},0,e)}return this}},{key:"isEmpty",value:function a(){return this._root===null}},{key:"toString",value:function a(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(a){return a.key},c=[];U(this._root,'',!0,function(a){return c.push(a)},b);return c.join('')}},{key:"update",value:function d(a,b,c){var e=this._comparator,f=S(a,this._root,e),g=f.left,h=f.right;this._size--;e(a,b)<0?(h=P(b,c,h,e,this)):(g=P(b,c,g,e,this));this._root=T(g,h,e)}},{key:"split",value:function b(a){return S(a,this._root,this._comparator)}},{key:"size",get:function a(){return this._size}}]);return a}();function W(a,b,c,d,e){var f=e-d;if(f>0){var g=d+Math.floor(f/2),h=b[g],i=c[g],j={key:h,data:i,parent:a};j.left=W(j,b,c,d,g);j.right=W(j,b,c,g+1,e);return j}return null}function X(a,b){var c={next:null},d=c;for(var e=0;e<a.length;e++)d=d.next={key:a[e],data:b[e]};d.next=null;return c.next}function Y(a){var b=a,c=[],d=!1,e={next:null},f=e;while(!d)b?(c.push(b),b=b.left):c.length>0?(b=f=f.next=c.pop(),b=b.right):(d=!0);f.next=null;return e.next}function Z(a,b,c){var d=c-b;if(d>0){var e=b+Math.floor(d/2),f=Z(a,b,e),g=a.head;g.left=f;a.head=a.head.next;g.right=Z(a,e+1,c);return g}return null}function _(c,d){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(a,b){return a-b},f={},g=f,h=c,i=d;while(h!==null&&i!==null)e(h.key,i.key)<0?(g.next=h,h=h.next):(g.next=i,i=i.next),g=g.next;h!==null?(g.next=h):i!==null&&(g.next=i);return f.next}function $(a,b,c,d,e){if(c>=d)return;var f=a[c+d>>1],g=c-1,h=d+1;while(!0){do{g++}while(e(a[g],f)<0);do{h--}while(e(a[h],f)>0);if(g>=h)break;var i=a[g];a[g]=a[h];a[h]=i;i=b[g];b[g]=b[h];b[h]=i}$(a,b,c,h,e);$(a,b,h+1,d,e)}var aa=function b(a){e(this,b);this.leftSweepEvent=a;this.rightSweepEvent=a.otherEvent;this.segmentAbove=null;this.segmentBelow=null;a.segment=this;a.otherEvent.segment=this};function ab(a,b,c){return(a.x-c.x)*(b.y-c.y)-(b.x-c.x)*(a.y-c.y)}function ac(a,b){if(a===b)return 0;if(ab(a.leftSweepEvent,a.rightSweepEvent,b.leftSweepEvent)!==0||ab(a.leftSweepEvent,a.rightSweepEvent,b.rightSweepEvent)!==0){if(a.leftSweepEvent.isSamePoint(b.leftSweepEvent))return a.leftSweepEvent.isBelow(b.rightSweepEvent)?-1:1;if(a.leftSweepEvent.x===b.leftSweepEvent.x)return a.leftSweepEvent.y<b.leftSweepEvent.y?-1:1;if(J(a.leftSweepEvent,b.leftSweepEvent)===1)return b.leftSweepEvent.isAbove(a.leftSweepEvent)?-1:1;return a.leftSweepEvent.isBelow(b.leftSweepEvent)?-1:1}return J(a.leftSweepEvent,b.leftSweepEvent)===1?1:-1}var ad=function(){function a(){e(this,a);this.tree=new V(ac)}g(a,[{key:"addSegment",value:function b(a){var c=new aa(a),d=this.tree.insert(c),e=this.tree.next(d),f=this.tree.prev(d);e!==null&&(c.segmentAbove=e.key,c.segmentAbove.segmentBelow=c);f!==null&&(c.segmentBelow=f.key,c.segmentBelow.segmentAbove=c);return d.key}},{key:"findSegment",value:function b(a){var c=this.tree.find(a);if(c===null)return null;return c.key}},{key:"removeSegmentFromSweepline",value:function b(a){var c=this.tree.find(a);if(c===null)return;var d=this.tree.next(c),e=this.tree.prev(c);if(d!==null){var f=d.key;f.segmentBelow=a.segmentBelow}if(e!==null){var g=e.key;g.segmentAbove=a.segmentAbove}this.tree.remove(a)}},{key:"testIntersect",value:function c(a,b){if(a===null||b===null)return !1;if(a.rightSweepEvent.isSamePoint(b.leftSweepEvent)||a.rightSweepEvent.isSamePoint(b.rightSweepEvent)||a.leftSweepEvent.isSamePoint(b.leftSweepEvent)||a.leftSweepEvent.isSamePoint(b.rightSweepEvent))return !1;var d=a.leftSweepEvent.x,e=a.leftSweepEvent.y,f=a.rightSweepEvent.x,g=a.rightSweepEvent.y,h=b.leftSweepEvent.x,i=b.leftSweepEvent.y,j=b.rightSweepEvent.x,k=b.rightSweepEvent.y,l=(k-i)*(f-d)-(j-h)*(g-e),m=(j-h)*(e-i)-(k-i)*(d-h),n=(f-d)*(e-i)-(g-e)*(d-h);if(l===0){if(m===0&&n===0)return !1;return !1}var o=m/l,p=n/l;if(o>=0&&o<=1&&p>=0&&p<=1){var q=d+o*(f-d),r=e+o*(g-e);return{x:q,y:r,segmentIndices:[a.leftSweepEvent.segmentIndex,b.leftSweepEvent.segmentIndex],segments:[[[a.leftSweepEvent.x,a.leftSweepEvent.y],[a.rightSweepEvent.x,a.rightSweepEvent.y]],[[b.leftSweepEvent.x,b.leftSweepEvent.y],[b.rightSweepEvent.x,b.rightSweepEvent.y]]]}}return !1}}]);return a}(),ae=function(){function a(b){e(this,a);this.x=b[0];this.y=b[1];this.otherEvent=null;this.isLeftEndpoint=null;this.segment=null;this.segmentIndex=null}g(a,[{key:"isOtherEndOfSegment",value:function b(a){return this===a.otherEvent}},{key:"isSamePoint",value:function b(a){return this.x===a.x&&this.y===a.y}},{key:"isBelow",value:function b(a){return this.isLeftEndpoint?ab(this,this.otherEvent,a)>0:ab(this.otherEvent,a,this)>0}},{key:"isAbove",value:function b(a){return!this.isBelow(a)}}]);return a}();function af(a,b){var c=a.type==='Feature'?a.geometry:a,d=c.coordinates;(c.type==='Polygon'||c.type==='MultiLineString')&&(d=[d]);c.type==='LineString'&&(d=[[d]]);var e=0;for(var f=0;f<d[0].length;f++){for(var g=0;g<d[0][f].length-1;g++){var h=new ae(d[0][f][g]),i=new ae(d[0][f][g+1]);h.segmentIndex=e;i.segmentIndex=e;h.otherEvent=i;i.otherEvent=h;J(h,i)>0?(i.isLeftEndpoint=!0,h.isLeftEndpoint=!1):(h.isLeftEndpoint=!0,i.isLeftEndpoint=!1);b.push(h);b.push(i);++e}}}function ag(a,b){if(process.env.NODE_ENV!=='development')return;var c=window.map,d=L.circleMarker([a.y,a.x]).addTo(c),e=b.tree.keys(),f=L.layerGroup([]).addTo(c);e.forEach(function(a){L.polyline([[a.leftSweepEvent.y,a.leftSweepEvent.x],[a.rightSweepEvent.y,a.rightSweepEvent.x]],{color:'grey'}).addTo(f)});var g=L.polyline([[a.y,a.x],[a.otherEvent.y,a.otherEvent.x]],{color:'red'}).addTo(c);d.remove();g.remove();f.remove()}function ah(a,b){if(process.env.NODE_ENV!=='development')return;var c=window.map,d=L.circleMarker([a.y,a.x]).addTo(c),e=L.layerGroup([]).addTo(c),f=c.getBounds();L.polyline([[f.getNorth(),a.x],[f.getSouth(),a.x]],{color:'grey',weight:1}).addTo(e);L.polyline([[b.leftSweepEvent.y,b.leftSweepEvent.x],[b.rightSweepEvent.y,b.rightSweepEvent.x]],{color:'red'}).addTo(e);b.segmentAbove!==null&&L.polyline([[b.segmentAbove.leftSweepEvent.y,b.segmentAbove.leftSweepEvent.x],[b.segmentAbove.rightSweepEvent.y,b.segmentAbove.rightSweepEvent.x]],{color:'green'}).addTo(e);b.segmentBelow!==null&&L.polyline([[b.segmentBelow.leftSweepEvent.y,b.segmentBelow.leftSweepEvent.x],[b.segmentBelow.rightSweepEvent.y,b.segmentBelow.rightSweepEvent.x]],{color:'purple'}).addTo(e);d.remove();e.clearLayers()}function ai(a,b){b==null&&(b={});b.booleanOnly==null&&(b.booleanOnly=!0);var c=[],d=new K();af(a,d);var e=new ad(),f=null;while(d.length){var g=d.pop();ag(g,e);if(g.isLeftEndpoint){f=e.addSegment(g);ah(g,f);var h=e.testIntersect(f,f.segmentAbove);if(h!==!1){if(b.booleanOnly)return !1;c.push(h)}var i=e.testIntersect(f,f.segmentBelow);if(i){if(b.booleanOnly)return !1;c.push(i)}}else{ah(g,g.segment);var j=e.testIntersect(g.segment.segmentAbove,g.segment.segmentBelow);if(j){if(b.booleanOnly)return !1;c.push(j)}e.removeSegmentFromSweepline(g.segment)}}if(b.booleanOnly)return !0;return c}function aj(a,b){console.time('checkIntersections');var c=ai({type:'Polygon',coordinates:a},{booleanOnly:!1});console.timeEnd('checkIntersections');if(c.length===0)return a;console.time('removeIntersections');var d=[];for(var e=0;e<c.length;e++){var f=c[e],g=new x([f.x,f.y]),h=f.segmentIndices[0],i=b[0].edges[h],j=i.splitAtPoint(g),k=j[0],l=j[1];b[0].edges.splice(h,1,k,l);var m=f.segmentIndices[1],n=b[0].edges[m],o=n.splitAtPoint(g),p=o[0],q=o[1];b[0].edges.splice(m,1,p,q);var r=e%2===0?k:p,s=[];while(r.edgeType!=='exit')s.push([r.point1.x,r.point1.y]),r=r.prevEdge;s.push(s[0]);d.push(s)}console.timeEnd('removeIntersections');return d}function am(a,b,c,d){if(!a)throw new Error('geojson-buffer: Feature is required');if(b===undefined||b===null||isNaN(b))throw new Error('dgeojson-buffer: Distance is required');var e=a.type==='Feature'?a.geometry:a;if((e.type==='Point'||e.type==='MultiPoint'||e.type==='LineString'||e.type==='MultiLineString')&&b<0){throw new Error('geojson-buffer: If offsetting a point or linestring the distance must be positive')}var f=s(b,c),g=r(f,'degrees'),h=F(a),i=[];for(var j=0;j<h.length;j++)i.push(h[j].createRawOffset(f,g));var k=F({type:'Polygon',coordinates:i}),l=aj(i,k);return l}c.bufferGeoJSON=am;Object.defineProperty(c,'__esModule',{value:!0})}))
